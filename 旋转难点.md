如何画出这些方块???

遍历所有节点,以第一个1作为基准点,其他点附加相对值...

旋转怎么办?[1,1,1,1] -> [[1],[1],[1],[1]] ? 转一次变一次?

或者以棋盘作为二维数组,基准点的坐标记录,其他的也是记录...

就从一维数组或者二维数组转变为一维数组坐标运算

例如一个长条,可以写成[

  {x:4 ,y: -4},

  {x:4 ,y: -3},

  {x:4 ,y: -2},

  {x:4 ,y: -1}

]

接下来只需要对这些坐标进行计算优化?

其实也只有两个基础操作,移动和旋转,再加上一个消除,

还有就是判断能否消除,是否固定住等等

​      //口-----------

​      //口-----------

​      //口-----------

​      //口-----------

------------------------------------

长条的下降很简单,就是Y坐标+1就行,平移也很简单,就是X坐标+1,有一点麻烦的就是绘制

无脑一点就是按照坐标,

forEach(() => fillrect(x*cellSize,y*cellSize,cellSize,cellSize))

通用点的方法?坐标对比,[a,b,c,d] -> [a,q,c,w]

ac不变(不做任何处理),bd没了(clearRect...),qw新增(fillRect...)

坐标运算规则?在数据层面,先判断能否进行更改坐标操作(是否固定住了...),再进行绘制,也就是说,绘制的时候不需要考虑穷他的

游戏规则如何运转??

整个表盘是一个二维数组,每个方块固定住之后就会把对应坐标更改为1,表示已经有了

每隔一段时间生成一个方块,并且随机进行旋转

每当有方块固定住,就遍历一下整个表盘(也不一定是整个表盘,可以是方块的row范围,长条塞到底下就是,19,18,17,16四行就好了)

消除多行?消除一行?从数据角度,把某行的数据重设为0,把顶层下移(同样可以进行坐标计算优化绘制)...

游戏结束?可以额外设置一层校验层?校验层有值了就G,或者在尝试插入固定的方块时没有位置了(或者说,-1层??),就是G

分数计算?这个应该问题不大,或者说以后再加

比较复杂一点的旋转,例如长条在左右两边,中心点旋转?中心轴旋转?或者是

_________________________________________>x

|1.不能超出棋盘范围的X坐标

|2.不能因为旋转导致Y坐标偏移

|3.自身局部坐标系,想象中的对称轴,不,模拟了一下我觉得是点,快速的旋转需要保证能回到原来位置

|  口口口口

|   从数据角度,这个就是四个点,(1,14),(2,14),(3,14)(4,14)

|   那这四个点旋转?中点是?(2.5,14),然后中点保持不变,90°旋转,

|   距离不变?

|

|   (0,0) (0,1) (1,1) (1,2) ->中点是?(0.5,1) x^2 + y^2 = 0.5

|   (x - x1)^2 + (y - y1)^2 = r^2

|   x = r*cos(t) + x1

|   y = r*sin(t) + y1

|   可是真的有必要这么复杂吗

|   sin(x + π/2) 可以简化为 cos(x)。

|   cos(x + π/2) 可以表示为 -sin(x)。

|   x = -y1 + x0 + y0

|   y = x1 - x0 + y0

|   也就是说,通过中心点,半径得到旋转圆的公式,然后从初始点可以得到旋转点...

vy